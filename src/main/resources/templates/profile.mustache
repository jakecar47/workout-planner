<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Profile</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

<!-- NAVBAR -->
<div class="navbar">
    <div class="nav-left brand">
        <a href="/" class="nav-link" alt="Home Link" style="display: flex; align-items: center; gap: 10px;">
            <img src="/images/BoxCruncherLogo.png" class="nav-logo" alt="BoxCruncher Logo">
            <span class="site-name">BoxCruncher</span>
        </a>
    </div>

    <div class="nav-center">
        <a href="/workouts" class="nav-link">Workouts</a>
        <a href="/exercises" class="nav-link">Exercises</a>
    </div>

    <div class="nav-right">
        <a href="/profile" class="profile-link">
            <img src="/images/ProfilePicture.png" class="profile-pic">
            <span class="profile-name">{{user.uname}}</span>
        </a>
    </div>
</div>

<!-- PAGE CONTENT -->
<div class="page-container">

    <!-- PROFILE PICTURE -->
    <div class="profile-center">
        <img src="/images/ProfilePicture.png" class="profile-pic">
    </div>

    <!-- USERNAME -->
    <h1 class="section-title" style="text-align:center; margin-top:15px;">
        {{user.uname}}
    </h1>

    <!-- GOALS SECTION -->
    <h2 class="section-title mt-30">Your Goals</h2>

    <div class="table-container">
        <table>
             <thead>
                <tr>
                    <th>Description</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            {{#goals}}
                <tr>
                    <td>{{description}}</td>
                    <td>
                        {{#completed}}
                            <span style="color:#7ed957; font-weight:600;">Complete</span>
                        {{/completed}}
                        {{^completed}}
                            <span style="color:#ffcc00; font-weight:600;">In Progress</span>
                        {{/completed}}
                    </td>
                    <td>
                        <!-- Toggle complete/incomplete -->
                        <form action="/goals/toggle/{{id}}" method="POST" style="display:inline;margin-right:8px;">
                            <button type="submit" class="black-button" style="padding:6px 10px; font-size:0.9rem;">
                                {{#completed}}Mark Incomplete{{/completed}}{{^completed}}Mark Complete{{/completed}}
                            </button>
                        </form>

                        <!-- Delete goal -->
                        <form action="/goals/delete/{{id}}" method="POST" style="display:inline;" onsubmit="return confirm('Delete this goal?');">
                            <button type="submit" class="black-button" style="background:#cc4a4a; padding:6px 10px; font-size:0.9rem;">
                                Delete
                            </button>
                        </form>
                    </td>
                </tr>
            {{/goals}}

            {{^goals}}
                <tr>
                    <td colspan="3" style="text-align:center; color:#ccc;">
                        No goals yet. Set one!
                    </td>
                </tr>
            {{/goals}}
            </tbody>
        </table>
    </div>

    <!-- ADD GOAL BUTTON -->
    <div class="center-button mt-20">
        <button class="black-button" onclick="window.location.href='/goals/new'">
            Add Goal
        </button>
    </div>

</div>

</body>
</html>
